<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<link rel="icon" href="data:;base64,=">
		<link rel="stylesheet" href="assets/css/main.css">
	</head>

	<body>
		<header id="header">
			<object id="logo" data="assets/icons/placeholder.svg"></object>

			<button class="switch" data-function="switch-explorer">
				<span>Explorer</span>
			</button>
		</header>

		<main id="main">
			<section class="canvas">
				<canvas id="canvas" width="0" height="0"></canvas>

				<div id="no-output">
					<object data="assets/icons/snowflake.svg"></object>

					<span>No Output</span>
				</div>
			</section>

			<section id="explorer">
				<div id="library" class="subsection">
					<div class="subheader">
						<button class="expand">
							<object data="assets/icons/arrow-down.svg"></object>
							Library
						</button>

						<button class="add">
							<object data="assets/icons/add.svg"></object>
						</button>
					</div>

					<div class="content">
						<span>Nothing Found</span>
					</div>
				</div>
			</section>
		</main>

		<section id="status">
			<div id="fps">
				<span id="fps-current">165 FPS</span>
				<span id="fps-min">Min: 45</span>
				<span id="fps-max">Max: 56</span>
			</div>
		</section>

		<script>
			let POINTER_X,
				POINTER_Y,
				root = document.documentElement,
				headerHeight = header.offsetHeight,
				statusHeight = document.querySelector("#status").offsetHeight,
				headerTrigger = headerHeight,
				headerTriggerOff = headerHeight * 2,
				fullScreen = document.body.classList.contains("fullscreen"),
				switches = document.querySelectorAll("button.switch"),
				expands = document.querySelectorAll("button.expand"),
				toggleFullScreen = e => {
					e.preventDefault();

					fullScreen = !fullScreen;

					document.body.classList.toggle("fullscreen", fullScreen);
					header.classList.toggle("visible", fullScreen && POINTER_Y < headerTrigger);
				};

			// Init CSS vars
			root.style.setProperty("--header-height", `${headerHeight}px`);
			root.style.setProperty("--status-height", `${statusHeight}px`);

			for (const button of switches) {
				let secondaryFunction;

				if (button.dataset.function === "switch-explorer") secondaryFunction = button => {
					explorer.classList.toggle("visible", button.classList.contains("switched"));
				};

				button.addEventListener("click", function() {
					this.classList.toggle("switched");

					secondaryFunction && secondaryFunction(this);
				});
			}

			for (const button of expands) {
				let secondaryFunction;

				button.addEventListener("click", function() {
					this.classList.toggle("expanded");
					this.parentNode.classList.toggle("expanded", this.classList.contains("expanded"));

					secondaryFunction && secondaryFunction(this);
				});
			}

			addEventListener("keydown", e => {
				e.code === "F10" && toggleFullScreen(e);
			});

			addEventListener("mousemove", e => {
				POINTER_X = e.clientX;
				POINTER_Y = e.clientY;

				if (fullScreen) {
					POINTER_Y < headerTrigger && header.classList.add("visible");
					POINTER_Y > headerTriggerOff && header.classList.remove("visible");
				}
			});
		</script>
	</body>
</html>